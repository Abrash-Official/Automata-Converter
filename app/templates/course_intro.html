{% extends "base.html" %}
{% block title %}Course Introduction & Fundamentals of Automata{% endblock %}
{% block content %}
<div class="card mb-4">
    {# The following card-header is removed as per user request to avoid redundancy with sidebar #}
    {# <div class="card-header bg-primary text-white">
        <h3 class="card-title mb-0">Course Introduction & Fundamentals of Automata</h3>
    </div> #}
    <div class="card-body">
        <h4 class="mb-3">What is Automata Theory?</h4>
        <p>
            <strong>Automata theory</strong> is the study of <strong>abstract machines (or automata)</strong> and the computational problems that can be solved using these machines. <br><br>It forms the foundation of computer science, particularly in the areas of compilers, parsing, and formal language theory. The theory addresses fundamental questions such as <strong>"What different models of machines can do and cannot do?"</strong> and explores the relationship between computability and complexity.
        </p>
        <hr>
        <h4 class="mb-3">Historical Perspective</h4>
        <p>The development of Automata Theory follows a rich timeline:</p>
        <ul>
            <li><strong>1930s:</strong> Alan Turing studies Turing machines, decidability, and the halting problem</li>
            <li><strong>1940-1950s:</strong> Finite automata machines are first studied</li>
            <li><strong>1950s:</strong> Noam Chomsky proposes the Chomsky Hierarchy for formal languages</li>
            <li><strong>1969:</strong> Cook introduces "intractable" problems or "NP-Hard" problems</li>
            <li><strong>1970-Present:</strong> Modern computer science evolves with compilers, computational and complexity theory</li>
        </ul>
        <hr>
        <h4 class="mb-3">Key Concepts</h4>
        <ul>
            <li><strong>Automaton:</strong> An abstract model of a machine that performs computations on input by moving through a series of states or configurations. At each state of the computation, a transition function determines the next configuration on the basis of a finite portion of the present configuration.</li>
            <li><strong>Finite Automaton:</strong> A simple idealized machine used to recognize patterns within input taken from some character set (or alphabet). The finite automata is an abstract computing device used for recognizing patterns.</li>
        </ul>
        <hr>
        <h4 class="mb-3">Applications of Automata Theory</h4>
        <ul>
            <li><strong>Compiler Design:</strong> Used in designing lexical scanners for checking program syntax</li>
            <li><strong>Pattern Matching:</strong> Spell checkers and text validation systems</li>
            <li><strong>Sequential Circuit Design:</strong> Used as transducers in hardware design</li>
            <li><strong>Text Editors:</strong> Essential for text processing applications</li>
        </ul>
        <hr>
        <h4 class="mb-3">Central Concepts</h4>
        <ul>
            <li><strong>Automaton:</strong> Developing a model which takes input and processing and gives output</li>
            <li><strong>Computability:</strong> Whether the process or machine can accept the input or not</li>
            <li><strong>Complexity:</strong> Accepting the optimal solution with low complexity.</li>
        </ul>
        <div class="alert alert-info mt-4">
            <strong>Tip for Beginners:</strong> Automata theory is the foundation for understanding how computers process languages and solve problems. Don't worry if it feels abstract at firstâ€”visualizing automata as simple machines that read and process input step by step can make the concepts much clearer!
        </div>

        <hr>
        <h4 class="mb-3">Graph/State Diagram Example</h4>
        <p>
            Automata are often visualized as graphs, where <strong>circles represent states</strong> and <strong>arrows represent transitions</strong> between states based on input symbols. Final (accepting) states are typically denoted by double circles.
        </p>
        <h6>DFA Example: Accepts all binary strings ending with '1'</h6>
        <div id="introDfaVisualization" class="cytoscape-container bg-dark" style="min-height: 300px;"></div>

        <h6 class="mt-3">DFA Transition Table:</h6>
        <div class="table-responsive bg-dark p-2 rounded">
            <table class="table table-bordered table-sm text-white">
                <thead class="table-light">
                    <tr><th>Current State</th><th>Input '0'</th><th>Input '1'</th></tr>
                </thead>
                <tbody>
                    <tr><td>q0</td><td>q0</td><td>q1</td></tr>
                    <tr><td>q1</td><td>q0</td><td>q1</td></tr>
                </tbody>
            </table>
        </div>

        <hr>
        <h4 class="mb-3">Code Example</h4>
        <p>Here's a simple Python function that simulates the DFA described above. You can modify the code and test it live:</p>
        <div class="code-editor-container card bg-dark p-3 rounded">
            <textarea id="codeEditor" style="height: 250px;" readonly>
def ends_with_one(s):
    state = 'q0'  # Initial state
    for char in s:
        if state == 'q0':
            if char == '0':
                state = 'q0'
            elif char == '1':
                state = 'q1'
        elif state == 'q1':
            if char == '0':
                state = 'q0'
            elif char == '1':
                state = 'q1'
    return state == 'q1'

# Example usage:
# print(ends_with_one('101'))
# print(ends_with_one('100'))
# print(ends_with_one('0'))
# print(ends_with_one('1'))</textarea>
            <div class="input-group mt-3">
                <input type="text" class="form-control bg-secondary text-white" id="codeTestInput" placeholder="Enter input string (e.g., 101)">
                <button class="btn btn-primary" id="runCodeBtn">
                    <i data-feather="play" class="me-2"></i>Run Code
                </button>
            </div>
            <h6 class="mt-3">Output:</h6>
            <pre id="codeOutput" class="bg-secondary text-white p-3 rounded"></pre>
        </div>
        <hr>
        <div class="card bg-dark text-white p-4">
            <h4 class="card-title mb-3">
                <i data-feather="help-circle" class="me-2"></i>
                Exercise
            </h4>
            <p>Test your understanding with these basic questions:</p>
            <div id="mcq-container">
                <div class="mcq-progress text-end mb-2"></div>
                <ol class="mcq-list" style="list-style: none; padding-left: 0;">
                    <li data-correct-answer="b" class="mcq-question-item">
                        <p class="mb-3">Which of the following best describes an <strong>automaton</strong>?</p>
                        <div class="list-group mb-3">
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="a">a) A type of programming language</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="b">b) An abstract model of a machine that performs computations</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="c">c) A complex data structure</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="d">d) A software development methodology</button>
                        </div>
                        <button type="button" class="btn btn-primary submit-mcq-btn">Submit Answer</button>
                        <p class="feedback mt-2"></p>
                    </li>
                    <li data-correct-answer="c" class="mcq-question-item" style="display: none;">
                        <p class="mb-3">In automata theory, what is the primary role of a <strong>Finite Automaton (FA)</strong>?</p>
                        <div class="list-group mb-3">
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="a">a) To perform complex arithmetic calculations</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="b">b) To manage large databases</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="c">c) To recognize patterns within input strings</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="d">d) To render graphics in real-time</button>
                        </div>
                        <button type="button" class="btn btn-primary submit-mcq-btn">Submit Answer</button>
                        <p class="feedback mt-2"></p>
                    </li>
                    <li data-correct-answer="b" class="mcq-question-item" style="display: none;">
                        <p class="mb-3">Which of these is a key application area for automata theory?</p>
                        <div class="list-group mb-3">
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="a">a) Game Development</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="b">b) Compiler Design</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="c">c) Network Security</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="d">d) Digital Marketing</button>
                        </div>
                        <button type="button" class="btn btn-primary submit-mcq-btn">Submit Answer</button>
                        <p class="feedback mt-2"></p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // CodeMirror Editor Initialization
        const codeEditorElement = document.getElementById('codeEditor');
        const editor = CodeMirror.fromTextArea(codeEditorElement, {
            mode: 'python',
            theme: 'dracula',
            lineNumbers: true,
            indentUnit: 4,
            tabSize: 4,
            lineWrapping: true,
            readOnly: true
        });

        // Set initial code content (from the textarea)
        editor.setValue(`def ends_with_one(s):
    state = 'q0'  # Initial state
    for char in s:
        if state == 'q0':
            if char == '0':
                state = 'q0'
            elif char == '1':
                state = 'q1'
        elif state == 'q1':
            if char == '0':
                state = 'q0'
            elif char == '1':
                state = 'q1'
    return state == 'q1'
`);

        // Client-side simulation of ends_with_one
        function simulateEndsWithOne(s) {
            let state = 'q0';  // Initial state
            for (let i = 0; i < s.length; i++) {
                let char = s[i];
                if (state === 'q0') {
                    if (char === '0') {
                        state = 'q0';
                    } else if (char === '1') {
                        state = 'q1';
                    }
                } else if (state === 'q1') {
                    if (char === '0') {
                        state = 'q0';
                    } else if (char === '1') {
                        state = 'q1';
                    }
                }
            }
            return state === 'q1';
        }

        // Run Code Button Logic
        const runCodeBtn = document.getElementById('runCodeBtn');
        const codeTestInput = document.getElementById('codeTestInput');
        const codeOutput = document.getElementById('codeOutput');

        runCodeBtn.addEventListener('click', function() {
            const inputString = codeTestInput.value;
            let output = '';

            // Safely evaluate the predefined function using the simulated JS version
            try {
                const result = simulateEndsWithOne(inputString);
                output = `Input: '${inputString}'\nOutput: ${result}`; /* Display input as well */
            } catch (e) {
                output = `Error: ${e.message}`; /* Basic error handling */
            }

            codeOutput.textContent = output;
        });

        // DFA Visualization for Introduction
        const dfaIntroElements = [
            { data: { id: 'q0', label: 'q0' }, position: { x: 100, y: 100 } },
            { data: { id: 'q1', label: 'q1' }, position: { x: 300, y: 100 } },
            { data: { source: 'q0', target: 'q0', label: '0' } },
            { data: { source: 'q0', target: 'q1', label: '1' } },
            { data: { source: 'q1', target: 'q0', label: '0' } },
            { data: { source: 'q1', target: 'q1', label: '1' } }
        ];

        const cyIntro = cytoscape({
            container: document.getElementById('introDfaVisualization'),
            elements: dfaIntroElements,
            style: [
                { // Nodes
                    selector: 'node',
                    style: {
                        'background-color': '#666',
                        'label': 'data(label)',
                        'text-valign': 'center',
                        'color': 'white',
                        'text-outline-width': 2,
                        'text-outline-color': '#333',
                        'shape': 'ellipse',
                        'width': '40px',
                        'height': '40px'
                    }
                },
                { // Edges
                    selector: 'edge',
                    style: {
                        'width': 2,
                        'line-color': '#ccc',
                        'target-arrow-color': '#ccc',
                        'target-arrow-shape': 'triangle',
                        'curve-style': 'bezier',
                        'label': 'data(label)',
                        'color': '#ccc',
                        'text-margin-y': -10
                    }
                },
                { // Start state (e.g., make it larger or different color)
                    selector: '#q0',
                    style: {
                        'background-color': '#28a745' // Green
                    }
                },
                { // Final state (e.g., double border)
                    selector: 'node[id = \'q1\']',
                    style: {
                        'border-width': 2,
                        'border-color': 'white',
                        'border-style': 'double'
                    }
                }
            ],
            layout: {
                name: 'grid',
                rows: 1,
                columns: 2
            },
            // User interaction
            wheelSensitivity: 0.2,
            // Initial viewport
            zoom: 1,
            pan: { x: 0, y: 0 },
            // Pixel ratio for higher resolution rendering
            pixelRatio: 2
        });

        // Workaround for Cytoscape not rendering in initially hidden/collapsed containers
        setTimeout(() => {
            cyIntro.resize();
            cyIntro.fit(); // Zoom to fit all elements
        }, 500); // Increased delay

        // Initialize Feather icons
        feather.replace();
        
        // Initialize application (assuming this is your global app initialization)
        initializeApp(); 
    });
</script>
{% endblock %} 