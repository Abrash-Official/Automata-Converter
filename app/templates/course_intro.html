{% extends "base.html" %}
{% block title %}Course Introduction & Fundamentals of Automata{% endblock %}
{% block content %}
<div class="card mb-4">
    {# The following card-header is removed as per user request to avoid redundancy with sidebar #}
    {# <div class="card-header bg-primary text-white">
        <h3 class="card-title mb-0">Course Introduction & Fundamentals of Automata</h3>
    </div> #}
    <div class="card-body">
        <h4 class="mb-3">What is Automata Theory?</h4>
        <p>
            <strong>Automata theory</strong> is an exciting, theoretical branch of computer science that established its roots during the 20th century, as mathematicians began developing machines which imitated certain features of man, completing calculations more quickly and reliably. Simply stated, automata theory deals with the logic of computation with respect to simple machines, referred to as <strong>automata</strong>.
        </p>
        <hr>
        <h4 class="mb-3">Key Concepts</h4>
        <ul>
            <li><strong>Automaton:</strong> An abstract model of a machine that performs computations on input by moving through a series of states or configurations. At each state of the computation, a transition function determines the next configuration on the basis of a finite portion of the present configuration.</li>
            <li><strong>Finite Automaton:</strong> A simple idealized machine used to recognize patterns within input taken from some character set (or alphabet). The finite automata is an abstract computing device used for recognizing patterns.</li>
        </ul>
        <hr>
        <h4 class="mb-3">Applications of Automata Theory</h4>
        <ul>
            <li><strong>Compiler Design:</strong> Used in designing lexical scanners for checking program syntax</li>
            <li><strong>Pattern Matching:</strong> Spell checkers and text validation systems</li>
            <li><strong>Sequential Circuit Design:</strong> Used as transducers in hardware design</li>
            <li><strong>Text Editors:</strong> Essential for text processing applications</li>
        </ul>
        <hr>
        <h4 class="mb-3">Central Concepts</h4>
        <ul>
            <li><strong>Automaton:</strong> Developing a model which takes input and processing and gives output</li>
            <li><strong>Computability:</strong> Whether the process or machine can accept the input or not</li>
            <li><strong>Complexity:</strong> Accepting the optimal solution with low complexity.</li>
        </ul>
        <div class="alert alert-info mt-4">
            <strong>Tip for Beginners:</strong> Automata theory is the foundation for understanding how computers process languages and solve problems. Don't worry if it feels abstract at firstâ€”visualizing automata as simple machines that read and process input step by step can make the concepts much clearer!
        </div>

        <hr>
        <h4 class="mb-3">Graph/State Diagram Example</h4>
        <p>
            Automata are often visualized as graphs, where <strong>circles represent states</strong> and <strong>arrows represent transitions</strong> between states based on input symbols. Final (accepting) states are typically denoted by double circles.
        </p>
        <h6>DFA Example: Accepts all binary strings ending with '1'</h6>
        <div id="introDfaVisualization" class="cytoscape-container bg-dark" style="min-height: 300px;"></div>

        <h6 class="mt-3">DFA Transition Table:</h6>
        <div class="table-responsive bg-dark p-2 rounded">
            <table class="table table-bordered table-sm text-white">
                <thead class="table-light">
                    <tr><th>Current State</th><th>Input '0'</th><th>Input '1'</th></tr>
                </thead>
                <tbody>
                    <tr><td>q0</td><td>q0</td><td>q1</td></tr>
                    <tr><td>q1</td><td>q0</td><td>q1</td></tr>
                </tbody>
            </table>
        </div>

        <hr>
        <div class="card bg-dark text-white p-4">
            <h4 class="card-title mb-3">
                <i data-feather="help-circle" class="me-2"></i>
                Exercise
            </h4>
            <p>Test your understanding with these basic questions:</p>
            <div id="mcq-container">
                <div class="mcq-progress text-end mb-2"></div>
                <ol class="mcq-list" style="list-style: none; padding-left: 0;">
                    <li data-correct-answer="b" class="mcq-question-item">
                        <p class="mb-3">Which of the following best describes an <strong>automaton</strong>?</p>
                        <div class="list-group mb-3">
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="a">a) A type of programming language</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="b">b) An abstract model of a machine that performs computations</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="c">c) A complex data structure</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="d">d) A software development methodology</button>
                        </div>
                        <button type="button" class="btn btn-primary submit-mcq-btn">Submit Answer</button>
                        <p class="feedback mt-2"></p>
                    </li>
                    <li data-correct-answer="c" class="mcq-question-item" style="display: none;">
                        <p class="mb-3">In automata theory, what is the primary role of a <strong>Finite Automaton (FA)</strong>?</p>
                        <div class="list-group mb-3">
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="a">a) To perform complex arithmetic calculations</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="b">b) To manage large databases</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="c">c) To recognize patterns within input strings</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="d">d) To render graphics in real-time</button>
                        </div>
                        <button type="button" class="btn btn-primary submit-mcq-btn">Submit Answer</button>
                        <p class="feedback mt-2"></p>
                    </li>
                    <li data-correct-answer="b" class="mcq-question-item" style="display: none;">
                        <p class="mb-3">Which of these is a key application area for automata theory?</p>
                        <div class="list-group mb-3">
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="a">a) Game Development</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="b">b) Compiler Design</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="c">c) Network Security</button>
                            <button type="button" class="list-group-item list-group-item-action mcq-option" data-option="d">d) Digital Marketing</button>
                        </div>
                        <button type="button" class="btn btn-primary submit-mcq-btn">Submit Answer</button>
                        <p class="feedback mt-2"></p>
                    </li>
                </ol>
            </div>
        </div>

        <hr>
        <h4 class="mb-3">Code Example</h4>
        <p>Here's a simple Python function that simulates the DFA described above:</p>
        <pre class="bg-dark p-3 rounded"><code>def ends_with_one(s):
    state = 'q0'  # Initial state
    for char in s:
        if state == 'q0':
            if char == '0':
                state = 'q0'
            elif char == '1':
                state = 'q1'
        elif state == 'q1':
            if char == '0':
                state = 'q0'
            elif char == '1':
                state = 'q1'
    return state == 'q1'

# Example usage:
print(ends_with_one('101'))
print(ends_with_one('100'))
print(ends_with_one('0'))
print(ends_with_one('1'))
</code></pre>
        <h6>Expected Output:</h6>
        <pre class="bg-dark p-3 rounded"><code>True
False
False
True
</code></pre>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // MCQ Logic
        const mcqQuestions = document.querySelectorAll('.mcq-question-item');
        const mcqProgress = document.querySelector('.mcq-progress');
        let currentQuestionIndex = 0;

        function updateMcqDisplay() {
            mcqQuestions.forEach((item, index) => {
                item.style.display = (index === currentQuestionIndex) ? 'block' : 'none';
                if (index === currentQuestionIndex) {
                    const currentQuestionItem = mcqQuestions[currentQuestionIndex];
                    currentQuestionItem.querySelectorAll('.mcq-option').forEach(btn => {
                        btn.classList.remove('list-group-item-success', 'list-group-item-danger', 'selected-option');
                        btn.disabled = false;
                    });
                    currentQuestionItem.querySelector('.feedback').textContent = '';
                    currentQuestionItem.querySelector('.submit-mcq-btn').style.display = 'block'; // Show submit button
                }
            });
            mcqProgress.textContent = `Question ${currentQuestionIndex + 1} of ${mcqQuestions.length}`;
        }

        mcqQuestions.forEach((questionItem) => {
            const options = questionItem.querySelectorAll('.mcq-option');
            const submitButton = questionItem.querySelector('.submit-mcq-btn');
            const feedbackElement = questionItem.querySelector('.feedback');
            const correctAnswer = questionItem.dataset.correctAnswer;

            options.forEach(option => {
                option.addEventListener('click', function() {
                    options.forEach(o => o.classList.remove('selected-option'));
                    this.classList.add('selected-option');
                });
            });

            submitButton.addEventListener('click', function() {
                const selectedOption = questionItem.querySelector('.mcq-option.selected-option');

                if (!selectedOption) {
                    feedbackElement.textContent = 'Please select an answer.';
                    feedbackElement.style.color = 'orange';
                    return;
                }

                options.forEach(btn => btn.disabled = true);
                submitButton.style.display = 'none';

                if (selectedOption.dataset.option === correctAnswer) {
                    selectedOption.classList.add('list-group-item-success');
                    feedbackElement.textContent = 'Correct!';
                    feedbackElement.style.color = 'green';
                } else {
                    selectedOption.classList.add('list-group-item-danger');
                    feedbackElement.textContent = `Wrong. The correct answer is ${correctAnswer.toUpperCase()}.`;
                    feedbackElement.style.color = 'red';
                    options.forEach(correctBtn => {
                        if (correctBtn.dataset.option === correctAnswer) {
                            correctBtn.classList.add('list-group-item-success');
                        }
                    });
                }

                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < mcqQuestions.length) {
                        updateMcqDisplay();
                    } else {
                        mcqProgress.textContent = 'All questions completed!';
                        feedbackElement.textContent = 'You have completed all questions.';
                        feedbackElement.style.color = 'blue';
                    }
                }, 1500);
            });
        });

        updateMcqDisplay();

        // DFA Visualization for Introduction
        const dfaIntroElements = [
            { data: { id: 'q0', label: 'q0' }, position: { x: 100, y: 100 } },
            { data: { id: 'q1', label: 'q1' }, position: { x: 300, y: 100 } },
            { data: { source: 'q0', target: 'q0', label: '0' } },
            { data: { source: 'q0', target: 'q1', label: '1' } },
            { data: { source: 'q1', target: 'q0', label: '0' } },
            { data: { source: 'q1', target: 'q1', label: '1' } }
        ];

        const cyIntro = cytoscape({
            container: document.getElementById('introDfaVisualization'),
            elements: dfaIntroElements,
            style: [
                { // Nodes
                    selector: 'node',
                    style: {
                        'background-color': '#666',
                        'label': 'data(label)',
                        'text-valign': 'center',
                        'color': 'white',
                        'text-outline-width': 2,
                        'text-outline-color': '#333',
                        'shape': 'ellipse',
                        'width': '40px',
                        'height': '40px'
                    }
                },
                { // Edges
                    selector: 'edge',
                    style: {
                        'width': 3,
                        'line-color': '#ccc',
                        'target-arrow-color': '#ccc',
                        'target-arrow-shape': 'triangle',
                        'curve-style': 'bezier',
                        'label': 'data(label)',
                        'text-rotation': 'autorotate',
                        'color': 'white',
                        'text-outline-width': 2,
                        'text-outline-color': '#333'
                    }
                },
                { // Start state (q0 in this case for introductory example, not a special style yet)
                    selector: '#q0',
                    style: {
                        'border-width': 2,
                        'border-color': '#ADD8E6' // Light blue for start
                    }
                },
                { // Final state
                    selector: '#q1',
                    style: {
                        'border-width': 2,
                        'border-color': '#F0E68C', // Yellow for final (double circle visual not supported by simple border)
                        'border-style': 'double'
                    }
                }
            ],
            layout: {
                name: 'preset'
            }
        });
    });
</script>
{% endblock %} 